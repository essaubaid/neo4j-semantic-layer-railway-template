FROM neo4j:5.21.0-community

# Non-secret config defaults (override via service variables in Railway if needed)
ENV NEO4J_dbms_security_auth__enabled=true
ENV NEO4JLABS_PLUGINS='["apoc"]'
ENV NEO4J_apoc_export_file_enabled=true
ENV NEO4J_apoc_import_file_enabled=true
ENV NEO4J_apoc_import_file_use__neo4j__config=true
ENV NEO4J_dbms_security_procedures_unrestricted=apoc.*
ENV NEO4J_dbms_security_procedures_allowlist=apoc.*,apoc.meta.*,apoc.schema.*
ENV NEO4J_dbms_connector_bolt_listen__address=0.0.0.0:7687
ENV NEO4J_dbms_connector_http_listen__address=0.0.0.0:8080
ENV NEO4J_server_memory_heap_max__size=2g
ENV NEO4J_server_memory_pagecache_size=1g

EXPOSE 8080 7687
